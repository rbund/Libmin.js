var Libmin=function(t){"use strict";var e=function r(t){if(r.prototype.instance)return r.prototype.instance;r.prototype.instance=this;r.prototype.defaultconfig={LIBBASE:""};r.prototype.configkeys=Object.keys(this.defaultconfig);r.prototype.jobs=[];this.__config={};var e=Array.prototype.slice.call(document.scripts).filter(function(t){return this.filter(function(t){return this.hasAttribute(t)},t).length>0},r.prototype.configkeys).shift()||{};r.prototype.configkeys.forEach(function(t){var o="data-"+t;this.__config[t]=e[o]?e[o]:r.prototype.defaultconfig[t]},this);this.get=function(){var t=Array.prototype.slice.call(arguments),e=t.join("."),o=r.prototype.instance,i=e.split("."),n=o;while(i.length){n=n[i.shift()];if(!n)break}return n};this.set=function(){var t=r.prototype.instance,e=Array.prototype.slice.call(arguments),o=e.pop(),i=e.join("."),n=i.split("."),s=n.pop(),a=t;if(arguments.length<2)return;while(n.length){if(!a[n[0]])a[n[0]]={};a=a[n.shift()]}a[s]=o;return a};this.__onScriptError=function(t,e){var o=this["data-namespace"],i=r.prototype.instance,n=r.prototype.jobs,s=0;document.body.removeChild(this);i.set(o,"__status",e?"loaded":"error");while(s<n.length){var a=n[s].mods.indexOf(o);if(a>=0){if(e)n[s].mods.splice(a,1);else n[s].mods=[];n[s].onload(e);if(n[s].mods.length==0)n.splice(s,1);else s++}else s++}};this.__onScriptLoaded=function(t){var e=r.prototype.instance;e.__onScriptError.call(this,t,true)};this.needs=function(t,e){var o=r.prototype.instance,i=Array.isArray(t)?t.slice(0):[t],n=[];while(i.length){var s=i.pop();switch(o.get(s,"__status")){case"loaded":if(e)e(true);break;case"error":if(e)e(false);return false;case"loading":default:n.push(s)}}if(n.length){if(e){r.prototype.jobs.push({mods:n.slice(0),onload:e})}while(n.length){var s=n.pop();o.set(s,"__status","loading");var a=document.createElement("script");a.setAttribute("async",true);a.src=o.__config.LIBBASE+s.replace(".","/")+".js";a.onload=o.__onScriptLoaded;a.onerror=o.__onScriptError;a["data-namespace"]=s;document.body.appendChild(a)}}else return true}};return new e(t)}(Libmin);